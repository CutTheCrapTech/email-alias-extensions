<!doctype html>
<html>
  <head>
    <title>Email Alias Settings</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="options-page">
    <h1>Settings</h1>

    <!-- Combined settings section -->
    <div class="section">
      <h2>Configuration</h2>

      <div class="form-group">
        <label for="domain">
          Domain
          <span
            class="info-icon"
            title="The domain you own where the aliases will be created, e.g., 'your-domain.com'."
            >i</span
          >
        </label>
        <input type="text" id="domain" placeholder="your-domain.com" />
      </div>

      <div class="form-group secret-key-group">
        <label for="token">
          Secret Key
          <span
            class="info-icon"
            title="The secret key used to generate unique, secure aliases. This key is the foundation of your email security."
            >i</span
          >
        </label>
        <div class="secret-key-container">
          <input
            type="password"
            id="token"
            placeholder="Generate a key to get started"
            readonly
          />
          <button id="generate-key-btn" class="small-btn">
            Generate New Key
          </button>
        </div>
        <div id="key-actions" class="hidden">
          <p class="backup-prompt">
            <strong>Action Required:</strong> Back up this key in a password
            manager. It is not recoverable.
          </p>
          <div class="button-group">
            <button id="copy-key-btn" class="small-btn">Copy Key</button>
            <button id="save-bitwarden-btn" class="small-btn">
              Save to Bitwarden
            </button>
            <button id="save-1password-btn" class="small-btn">
              Save to 1Password
            </button>
          </div>
          <div class="backup-confirmation">
            <input type="checkbox" id="backup-confirmed" />
            <label for="backup-confirmed">
              I have securely backed up my secret key.
            </label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="default-label">
          Default Label
          <span
            class="info-icon"
            title="The default category that will be pre-filled when generating aliases (e.g., 'marketing', 'newsletter', 'signup')."
            >i</span
          >
        </label>
        <input type="text" id="default-label" placeholder="marketing" />
      </div>

      <button id="save-btn">Save</button>

      <div id="status-message" class="hidden"></div>
    </div>

    <!-- Keyboard Shortcuts section -->
    <div class="section keyboard-section">
      <h2>Keyboard Shortcuts</h2>
      <p>
        Configure keyboard shortcuts for quick access to extension features:
      </p>

      <div class="shortcut-item">
        <label for="popup-shortcut">
          Open Extension Popup
          <span
            class="info-icon"
            title="Keyboard shortcut to open the main extension popup for generating aliases."
            >i</span
          >
        </label>
        <div class="shortcut-input-container">
          <input
            type="text"
            id="popup-shortcut"
            placeholder="Ctrl+Shift+E"
            readonly
            class="shortcut-input"
          />
          <button id="record-popup-shortcut" class="record-btn">
            Set Shortcut
          </button>
          <button id="clear-popup-shortcut" class="clear-btn">Clear</button>
        </div>
      </div>

      <div class="shortcut-item">
        <label for="fill-shortcut">
          Fill Current Input Field
          <span
            class="info-icon"
            title="Keyboard shortcut to automatically fill the currently focused email input field with a generated alias."
            >i</span
          >
        </label>
        <div class="shortcut-input-container">
          <input
            type="text"
            id="fill-shortcut"
            placeholder="Ctrl+Shift+A"
            readonly
            class="shortcut-input"
          />
          <button id="record-fill-shortcut" class="record-btn">
            Set Shortcut
          </button>
          <button id="clear-fill-shortcut" class="clear-btn">Clear</button>
        </div>
      </div>

      <div class="keyboard-help">
        <p><strong>How to set shortcuts:</strong></p>
        <ol>
          <li>Click "Set Shortcut" button</li>
          <li>Press your desired key combination (e.g., Ctrl+Shift+E)</li>
          <li>The shortcut will be saved automatically</li>
        </ol>
        <p class="keyboard-note">
          <strong>Note:</strong> Use modifier keys (Ctrl, Alt, Shift) with
          letters or numbers. Some combinations may conflict with browser or
          system shortcuts.
        </p>
      </div>
    </div>

    <!-- Pin to toolbar section -->
    <div class="section pin-section">
      <h2>Quick Access</h2>
      <p>
        For easy access to the alias generator, make sure to pin this extension
        to your toolbar:
      </p>
      <ol class="pin-instructions">
        <li>
          Click the puzzle piece icon <span class="puzzle-icon">ðŸ§©</span> in
          your browser toolbar
        </li>
        <li>Find "Email Alias Generator" in the list</li>
        <li>Click the pin icon <span class="pin-icon">ðŸ“Œ</span> next to it</li>
      </ol>
      <p class="pin-note">
        Once pinned, you'll see the extension icon in your toolbar for quick
        access!
      </p>
    </div>

    <!-- Context menu info section -->
    <div class="section context-menu-section">
      <h2>Context Menu Feature</h2>
      <p>You can also generate aliases directly on any website:</p>
      <ol class="context-instructions">
        <li>Right-click on any email input field on a website</li>
        <li>Select "Fill with generated email alias" from the context menu</li>
        <li>Enter your label and source, then click generate</li>
        <li>The alias will be automatically filled into the input field</li>
      </ol>
    </div>

    <script type="module" src="options.js"></script>
  </body>
</html>
